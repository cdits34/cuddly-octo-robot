<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat App</title>
<link rel="stylesheet" href="styles.css">
<style>
body { font-family: Arial, sans-serif; background:#f0f2f5; margin:0; }
header { background:#1e90ff; color:white; padding:12px 20px; display:flex; justify-content:space-between; align-items:center; }
#messages { padding:10px; max-height:500px; overflow-y:auto; }
.message { background:#fff; padding:8px; margin-bottom:8px; border-radius:5px; box-shadow:0 1px 2px rgba(0,0,0,0.1); }
.msg-header { display:flex; align-items:center; gap:8px; }
.msg-text, .msg-img, audio, video { margin-top:5px; }
#message-form, #dm-form { display:flex; gap:5px; margin:10px; }
#youtube-modal, #add-person-modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.modal-content { background:#fff; padding:20px; border-radius:5px; width:90%; max-width:400px; max-height:80%; overflow:auto; }
.dm-item { padding:5px; cursor:pointer; display:flex; align-items:center; gap:8px; border-bottom:1px solid #ccc; }
.dm-item:hover { background:#eee; }
.unread { background:red; color:white; border-radius:50%; padding:2px 6px; font-size:0.8rem; margin-left:auto; }
#user-profile img { border-radius:50%; vertical-align:middle; }
button { cursor:pointer; }
</style>
</head>
<body>

<header>
  <div id="user-profile"></div>
  <div>
    <button id="login">Login</button>
    <button id="logout" style="display:none;">Logout</button>
  </div>
</header>

<section id="chat-section">
  <div style="display:flex; gap:10px;">
    <div style="flex:1;">
      <h3>Public Messages</h3>
      <div id="messages"><p>Login to see messages</p></div>
    </div>

    <div style="width:250px;">
      <h3>DMs / Groups</h3>
      <div id="dm-list-received"></div>
      <div id="dm-list-sent"></div>
    </div>
  </div>

  <form id="message-form" style="display:none;">
    <input type="text" id="message-input" placeholder="Type a message" style="flex:1;">
    <input type="file" id="file-input" style="display:none;">
    <button type="button" id="file-btn">üìé</button>
    <button type="button" id="youtube-btn">üé¨</button>
    <button type="button" id="mic-btn">üé§</button>
    <button type="submit">Send</button>
  </form>

  <form id="dm-form" style="display:none; margin-top:5px;">
    <input type="text" id="dm-email" placeholder="User emails comma separated" style="flex:1;">
    <button type="submit">Start DM / Group</button>
    <button type="button" id="add-person-btn" style="display:none;">Add Person</button>
  </form>

  <button id="back-public-btn" style="display:none; margin:10px;">Back to Public Chat</button>
</section>

<!-- YouTube Modal -->
<div id="youtube-modal">
  <div class="modal-content">
    <button id="close-modal" style="float:right;">‚ùå</button>
    <h3>YouTube Search</h3>
    <input type="text" id="youtube-search" placeholder="Search YouTube">
    <button id="youtube-search-btn">Search</button>
    <div id="youtube-results" style="margin-top:10px;"></div>
  </div>
</div>

<!-- Add Person Modal -->
<div id="add-person-modal">
  <div class="modal-content">
    <h3>Add Person to Group</h3>
    <input type="text" id="add-person-search" placeholder="Search by name">
    <div id="add-person-results" style="margin-top:10px;"></div>
    <button id="add-person-cancel" style="margin-top:10px;">Cancel</button>
  </div>
</div>

<script type="module" src="app.js"></script>
<script type="module" src="dm_unread_updater.js"></script>
</body>
</html>
